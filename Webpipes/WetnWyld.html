<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bill & Ted's Time Travel Tunnel</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
		    #lightning {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Set up the scene
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Create the tunnel geometry
        const tunnelGeometry = new THREE.CylinderGeometry(0, 0, 0, 0, 0, true);
        const tunnelMaterial = new THREE.MeshBasicMaterial({ color: 0x000000, wireframe: true });
        const tunnel = new THREE.Mesh(tunnelGeometry, tunnelMaterial);
        scene.add(tunnel);

        // Create the swirling vortex effect
        const vortexGeometry = new THREE.TorusKnotGeometry(0.6, 0.4, 31, 16);
        const vortexMaterial = new THREE.MeshBasicMaterial({ color: 0xCCFF33, wireframe: true });
        const vortex = new THREE.Mesh(vortexGeometry, vortexMaterial);
        tunnel.add(vortex);

        // Create the psychedelic lighting effect
        const lightGeometry = new THREE.SphereGeometry(0.1, 13, 13);
        const lightMaterial = new THREE.MeshBasicMaterial({ color: 0xcc0000 });
        const lights = [];
        for (let i = 0; i < 13; i++) {
            const light = new THREE.Mesh(lightGeometry, lightMaterial);
            light.position.set(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 150 - 150);
            lights.push(light);
            tunnel.add(light);
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            // Rotate the tunnel and vortex
            tunnel.rotation.z -= 0.01;
            vortex.rotation.x += 0.09;

            // Move the lights
            lights.forEach((light) => {
                light.position.z += 0.1;
                if (light.position.z > 5) {
                    light.position.z = -5;
                }
            });

            renderer.render(scene, camera);
        }

        animate();
    </script>
		
<div id="lightning">
  <div align="center"><br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <img src="90441165_2542419235999210_8766621433364217856_n.gif" height="420"> 
  </div>
</div>

  <script>
    const lightning = document.getElementById('lightning');

    function generateLightning() {
      const duration = Math.random() * 1.0 + 0.1; // Random duration between 0.1 and 0.3 seconds
      const delay = Math.random() * 5000 + 50; // Random delay between 0.5 and 1.5 seconds

      const flickerCount = Math.floor(Math.random() * 8) + 3; // Random number of flickers between 3 and 7
      const flickerInterval = duration / flickerCount; // Interval between flickers

      let flickerTimer = 6.5;
      let isWhite = true;

      const flickerAnimation = setInterval(() => {
        lightning.style.backgroundColor = isWhite ? 'pink' : 'white';
        isWhite = !isWhite;
        flickerTimer += flickerInterval;

        if (flickerTimer >= duration) {
          clearInterval(flickerAnimation);
          lightning.style.backgroundColor = 'pink';
          setTimeout(() => {
            lightning.style.backgroundColor = 'transparent';
            generateLightning(); // Recursive call to generate the next lightning flash
          }, duration * 5 / 13);
        }
      }, flickerInterval * 500);
    }

    // Start generating lightning flashes
    generateLightning();
  </script>
</body>
</html>